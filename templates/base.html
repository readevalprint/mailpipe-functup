<!DOCTYPE html>
<html>

  {% load  static %}
  {% load rest_framework  %}

  <head>
    <link rel="shortcut icon" href="/static/favicon.ico" />

    {% block head %}

      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <title>{% block meta_title %}Mailpipe{% endblock %} </title>

      <link rel="stylesheet" type="text/css" href="{% static "bootstrap/css/bootstrap.min.css" %}"/>
      <link rel="stylesheet" type="text/css" href="{% static "bootstrap/css/bootstrap-responsive.css" %}"/>
      <style type="text/css">
        body {
          padding-top: 20px;
          padding-bottom: 40px;
        }

        /* Custom container */

        .home .container {
        }
        .home .masthead h1 {
          display: none;
        }
        .home .masthead .muted {
          display: none;
        }
        .home .masthead hr {
          display: none;
        }

        .row.gray {
          background-color: #f4f4f4;
        }
        .pad {
          padding: 40px 0;
        }
        label[for=id_json] {
          display: none;
        }
        tr.clickableRow { cursor: pointer; }


      </style>
      <script src="{% static "rest_framework/js/jquery-3.3.1.min.js" %}"></script>
      <script src="{% static "js/bootstrap.js" %}"></script>
      <script src="{% static "js/bootstrap-extras.js" %}"></script>
      <script src="{% static "js/jsoneditor.min.js" %}"></script>
      <script src="{% static "js/jsoneditor_init.js" %}"></script>

    {% endblock %}
  </head>

  <body class="{% block bodyclass %}{% endblock %} ">
    <div class="container">

      {% block masthead %}
        <div class="masthead">
          <ul class="nav nav-pills pull-right">
            {% if user.is_authenticated %}
              <li>
              <a href="/welcome/">Welcome</a>
              </li>
              <li>
              <a href="/">Inboxes</a>
              </li>
              <li>
              <a href="/topup/">Balance {{ balance|floatformat:8 }} BTC</a>
              </li>
              <li>
              <a href="/plans/">Plan</a>
              </li>
              <li>
              <a href="/transactions/">Transactions</a>
              </li>
              <li>
              <form action='/_logout' method="POST">
                <button class='btn btn-link' type="submit">Logout</button>
                {% csrf_token %}
              </form>
              </li>
            {% else %}
              <li><a href="/_login">Log in</a></li>
            {% endif %}
          </ul>
          <h1><a class="header" class="" href="/"> Mailpipe</a></h1>
          <small class="muted">A simple API for incoming email.</small>
          <hr>
        </div>
      {% endblock %}


      {% block content %}
        {{ content }}
      {% endblock %}
    </div>
    <script src="{% static "mailpipe_io/js/bootstrap-ajax.js" %}"></script>
    <script src="{% static "rest_framework/js/prettify-min.js" %}"></script>
    <script src="{% static "rest_framework/js/default.js" %}"></script>

    <script>
      $(function(){
        var activeurl = window.location.pathname;
        $('a[href="'+activeurl+'"]').parent('li').addClass('active');
      })
    </script>
    <script>
      function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
          var cookies = document.cookie.split(';');
          for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
            }
          }
        }
        return cookieValue;
      }
    </script>

  </body>
</html>
